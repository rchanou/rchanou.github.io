/*

    Copyright (C) 2014 Dave Lesage
    License: MIT
    See license.txt for full license text.
*/
(function(l){var d=new function(a){},a=function(){function a(c){this.xStack=[];this.yStack=[];this.count=0;this.maxStackDepth=c}a.prototype.push=function(a,c){this.xStack.push(a);this.yStack.push(c);this.count++};a.prototype.pop=function(){this.xStack.pop();this.yStack.pop();this.count--};return a}();d.getType=function(a){return Object.prototype.toString.call(a).match(/^\[object (.+)\]$/)[1]};d.coalesce=function(){for(var a=Array.prototype.slice.call(arguments),e=0;e<a.length;e++)if(d.check.exists(a[e]))return a[e];
return null};d.deepCopy=function(c){function e(a,c){g=f.xStack.indexOf(a);return-1===g?(f.push(a,c),d.forEach(a,function(a,f){c[f]=b(a)}),f.pop(),c):f.yStack[g]}function h(a){var b=a.toString(),f=b.substring(b.indexOf("(")+1,b.indexOf(")")).trim().split(",");f.map(function(a,b,f){f[b]=a.trim()});b=b.substring(b.indexOf("{")+1,b.indexOf("}")).trim();f=new Function(f,b);return e(a,f)}function b(a){if(f.count>f.maxStackDepth)throw Error("Stack depth exceeded: "+f.stackMaxDepth+"!");switch(d.getType(a)){case d.types.object:return e(a,
Object.create(a));case d.types.array:return e(a,[]);case d.types.regexp:return e(a,new RegExp(a));case d.types.date:return e(a,new Date(a.toString()));case d.types.function:return h(a);default:return a}}var g=-1,f=new a(1E3);return b(c)};d.defineProperty=function(a,e,d){null==a[e]?Object.defineProperty(a,e,d):console.error("Error: the method "+e+" has already been defined on the following object: "+a)};d.equals=function(c,e){function h(a,k){if(a===k)return!0;var c=Object.keys(a),e=Object.keys(k);
c.quicksort();e.quicksort();if(!b(c,e))return!1;g.push(a,k);for(var d in a)if(!b(a[d],k[d]))return!1;g.pop();return!0}function b(a,c){if(g.count>g.maxStackDepth)throw Error("Stack depth exceeded: "+g.maxStackDepth+"!");if(a===c)return!0;var e=d.getType(a),m=d.getType(c);if(e!==m)return!1;var m=g.xStack.lastIndexOf(a),p=g.yStack.lastIndexOf(c);if(-1!==m&&-1!==p)return!0;switch(e){case d.types.date:if(a.getTime()!==c.getTime()||!h(a,c))return!1;break;case d.types.function:if(!d.equals(d.functions.getBody(a),
d.functions.getBody(c))||!d.equals(d.functions.getArgumentNames(a),d.functions.getArgumentNames(c))||!h(a,c))return!1;break;case d.types.array:if(a.length!==c.length)return!1;g.push(a,c);for(e=0;e<a.length;e++)if(!b(a[e],c[e]))return!1;g.pop();break;case d.types.object:case d.types.regexp:if(!h(a,c))return!1;break;default:if(a!==c)return!1}return!0}var g=new a(1E3);return b(c,e)};d.extend=function(){var a=Array.prototype.slice.call(arguments);if(0>=a.length)return null;if(1===a.length)return a[0];
for(var e=a[0],h=1;h<a.length;h++)d.assert.isSmashable(e,a[h]),d.forEach(a[h],function(b,g){d.check.exists(e[g])?d.check.isSmashable(e[g],a[h][g])&&(e[g]=d.smash(e[g],a[h][g])):e[g]=a[h][g]});return e};d.forEach=function(a,e,h){switch(d.getType(a)){case d.types.date:case d.types.function:case d.types.object:case d.types.regexp:for(var b in a)a.hasOwnProperty(b)&&e.call(h,a[b],b,a);break;case d.types.arguments:case d.types.array:for(b=0;b<a.length;b++)e.call(h,a[b],b,a)}return a};d.smash=function(){var a=
Array.prototype.slice.call(arguments);if(0>=a.length)return null;if(1===a.length)return a[0];var e=a[0],h=a[a.length-1];d.assert.isSmashable(e,h);d.forEach(h,function(a,b){d.check.isSmashable(e[b],h[b])?d.smash(e[b],h[b]):e[b]=d.deepCopy(h[b])});for(var b=a.length-2;1<=b;b--)d.assert.isSmashable(a[b],e),d.forEach(a[b],function(g,f){d.check.exists(e[f])?d.check.isSmashable(e[f],a[b][f])&&d.smash(e[f],a[b][f]):e[f]=d.deepCopy(a[b][f])});return e};d.lambda=function(a){if(null==a)return d.functions.identity;
if(d.getType(a)===d.types.function)return a;if(d.getType(a)===d.types.string){if(d.equals(a,""))return d.functions.identity;if(-1<a.indexOf("=>")){var e=a.match(d.functions.matcher);return(new Function(e[1]||[],"return "+e[2]+";")).bind(arguments.callee.caller)}}return function(e){return d.equals(a,e)}};d.setup=function(a){a=a||{};d.setup.initArrays&&d.setup.initArrays(a.useArrayExtensions);d.setup.initFunctions&&d.setup.initFunctions(a.useFunctionExtensions);d.setup.initNumbers&&d.setup.initNumbers(a.useNumberExtensions);
d.setup.initObjects&&d.setup.initObjects(a.useObjectExtensions);d.setup.initLogger&&d.setup.initLogger(a.defaultLogger)};d.functions={identity:function(a){return a},"true":function(a){return!0},"false":function(a){return!1},empty:function(a){},matcher:/^(?:[(\s*]*)?(\w+(?:,\s*\w+)*)?(?:[)\s*]*)?=>(?:\s*)?(.*)$/};d.types={arguments:d.getType(arguments),array:d.getType([]),"boolean":d.getType(!0),date:d.getType(new Date),"function":d.getType(function(){}),"null":d.getType(null),number:d.getType(0),
object:d.getType({}),string:d.getType(""),regexp:d.getType(RegExp()),undefined:d.getType(l)};return function(){var a;a="undefined"!==typeof window?window:"undefined"!==typeof global?global:this;"undefined"!==typeof define&&"undefined"!==typeof define.amd?(a.z=d,define(function(){return d})):"undefined"!==typeof module?(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d)):a.z=d;return d}()})();
(function(l){function d(a){var c=a.arrays={};c.aggregate=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],f=arguments[b++],b=arguments[b++];a.assert.isNonEmptyArray(g);for(var f=a.lambda(f),b=null==b?g[0]:f(b,g[0]),k=1;k<g.length;k++)b=f(b,g[k]);return b};c.any=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++];if(null==b)return 0<g.length;for(var b=a.lambda(b),f=0;f<g.length;f++)if(b(g[f]))return!0;return!1};c.average=function(){var b=
0,g=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++];return c.sum(g,b)/g.length};c.contains=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],f=arguments[b++],b=arguments[b++],k;k=a.check.isFunction(f)?function(a){return f(a)}:function(b,f){return a.equals(b,f)};if(null==b)for(var e=0;e<g.length;e++){if(k(g[e],f))return!0}else for(b=a.lambda(b),e=0;e<g.length;e++)if(k(b(g[e]),f))return!0;return!1};c.count=function(){var b=0,g=a.getType(this)===a.types.array?
this:arguments[b++],f=arguments[b++],b=arguments[b++],k=0,e;e=a.check.isFunction(f)?function(a){return f(a)}:function(b,f){return a.equals(b,f)};if(null==b)for(var c=0;c<g.length;c++)e(g[c],f)&&k++;else for(b=a.lambda(b),c=0;c<g.length;c++)e(b(g[c]),f)&&k++;return k};var e=function(){return a.deepCopy(this)};c.distinct=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=[];if(null==b)for(var k=0;k<g.length;k++)f.contains(g[k])||f.push(g[k]);else for(b=a.lambda(b),
k=0;k<g.length;k++)f.contains(b(g[k]),b)||f.push(g[k]);return f};var d=function(b){return a.equals(this,b)};c.first=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],g=this;if(null==b){if(0<g.length)return g[0]}else for(var b=a.lambda(b),f=0;f<g.length;f++)if(b(g[f]))return g[f];return null};c.innerJoin=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],f=arguments[b++];return{on:function(b){var e=[];b=a.lambda(b);for(var c=0;c<g.length;c++){a.check.isObject(g[c]);
for(var d=0;d<f.length;d++)a.check.isObject(f[d]),b(g[c],f[d])&&e.push(a.smash({},g[c],f[d]))}return e}}};c.isEmpty=function(){var b=0,b=a.getType(this)===a.types.array?this:arguments[b++];if(1>b.length)return!0;for(var g=0;g<b.length;g++)if(a.check.exists(b[g]))return!1;return!0};c.isFull=function(){var b=0,b=a.getType(this)===a.types.array?this:arguments[b++];if(1>b.length)return!1;for(var g=0;g<b.length;g++)if(!a.check.exists(b[g]))return!1;return!0};c.last=function(){var b=0,g=a.getType(this)===
a.types.array?this:arguments[b++],b=arguments[b++];if(null==b){if(0<g.length)return g[g.length-1]}else for(var b=a.lambda(b),f=g.length-1;0<=f;f--)if(b(g[f]))return g[f];return null};c.max=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=Number.MIN_VALUE;if(null!=b)for(var b=a.lambda(b),k=0;k<g.length;k++){var e=b(g[k]);a.check.isNumber(e)&&f<e&&(f=e)}else for(k=0;k<g.length;k++)e=g[k],a.check.isNumber(e)&&f<e&&(f=e);return f};c.min=function(){var b=0,g=
a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=Number.MAX_VALUE;if(null!=b)for(var b=a.lambda(b),e=0;e<g.length;e++){var c=b(g[e]);a.check.isNumber(c)&&c<f&&(f=c)}else for(e=0;e<g.length;e++)c=g[e],a.check.isNumber(c)&&c<f&&(f=c);return f};c.mutate=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],f=arguments[b++],f=a.lambda(f);a.check.isFunction(f)&&a.forEach(g,function(a,b){g[b]=f(g[b])});return g};c.orderBy=function(){var b=0,g=a.getType(this)===a.types.array?
this:arguments[b++],f=arguments[b++],b=arguments[b++],f=a.lambda(f),b=b||function(a,b){return f(a)>f(b)?1:f(a)<f(b)?-1:0},e=g.where(function(a){return null!=f(a)}),g=g.where(function(a){return null==f(a)});e.quicksort(b);return e.concat(g)};c.quicksort=function(){var b=0,g=a.getType(this)===a.types.array?this:arguments[b++],f=arguments[b++],f=a.getType(f)===a.types.string?a.lambda(f):f||function(a,b){return a>b?1:a<b?-1:0},e=function(a,b){do{var c=a,d=b,h=g[Math.floor((a+b)/2)];do{for(;c<g.length&&
0>f(g[c],h);)c++;for(;0<=d&&0>f(h,g[d]);)d--;if(c>d)break;c<d&&g.swap(c,d);c++;d--}while(c<=d);d-a<=b-c?(a<d&&e(a,d),a=c):(c<b&&e(c,b),b=d)}while(a<b)};e(0,this.length-1)};c.quicksort3=function(){var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],f=arguments[b++],f=a.getType(f)===a.types.string?a.lambda(f):f||function(a,b){return a>b?1:a<b?-1:0},c=function(a,b){for(var d=a,h=b,l=e[a],n=a+1;n<=h;){var t=f(e[n],l);0>t?e.swap(d++,n++):0<t?e.swap(n,h--):n++}a<d-1&&c(a,d-1);h+1<b&&c(h+1,b)};
c(0,this.length-1)};c.removeAll=function(){for(var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=0,b=a.lambda(b),c=e.length-1;-1<c;c--)b(e[c])&&(e.splice(c,1),f++);return f};c.select=function(){for(var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=[],b=a.lambda(b),c=0;c<e.length;c++)f.push(b(e[c]));return f};c.skip=function(){var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=[];0>b&&(b=0);for(var c=0;c<e.length-
b&&b<=e.length;c++)f[c]=e[c+b];return f};c.sum=function(){var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=0;if(null!=b)for(var b=a.lambda(b),c=0;c<e.length;c++){var d=b(e[c]);a.check.isNumber(d)&&(f+=d)}else for(c=0;c<e.length;c++)a.check.isNumber(e[c])&&(f+=e[c]);return f};c.swap=function(){var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],f=arguments[b++],b=arguments[b++],c=e[f];e[f]=e[b];e[b]=c};c.take=function(){var b=0,e=a.getType(this)===a.types.array?
this:arguments[b++],b=arguments[b++],f=[];0>b&&(b=0);for(var c=0;c<b&&c<e.length;c++)f[c]=e[c];return f};c.takeWhile=function(){for(var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],f=[],b=a.lambda(b),c=0;c<count&&b(e[c]);c++)f.push(e[c]);return f};c.where=function(){for(var b=0,e=a.getType(this)===a.types.array?this:arguments[b++],b=arguments[b++],b=a.lambda(b),e=this,f=[],c=0;c<e.length;c++)b(e[c])&&f.push(e[c]);return f};c.zip=function(){for(var b=0,e=a.getType(this)===
a.types.array?this:arguments[b++],c=arguments[b++],b=arguments[b++],b=a.lambda(b),d=[],h=0;h<this.length;h++)d.push(b(e[h],c[h]));return d};a.setup.initArrays=function(b){b&&(a.defineProperty(Array.prototype,"aggregate",{enumerable:!1,writable:!1,value:c.aggregate}),a.defineProperty(Array.prototype,"any",{enumerable:!1,writable:!1,value:c.any}),a.defineProperty(Array.prototype,"average",{enumerable:!1,writable:!1,value:c.average}),a.defineProperty(Array.prototype,"contains",{enumerable:!1,writable:!1,
value:c.contains}),a.defineProperty(Array.prototype,"count",{enumerable:!1,writable:!1,value:c.count}),a.defineProperty(Array.prototype,"deepCopy",{enumerable:!1,writable:!1,value:e}),a.defineProperty(Array.prototype,"distinct",{enumerable:!1,writable:!1,value:c.distinct}),a.defineProperty(Array.prototype,"equals",{enumerable:!1,writable:!1,value:d}),a.defineProperty(Array.prototype,"first",{enumerable:!1,writable:!1,value:c.first}),a.defineProperty(Array.prototype,"innerJoin",{enumerable:!1,writable:!1,
value:c.innerJoin}),a.defineProperty(Array.prototype,"isEmpty",{enumerable:!1,writable:!1,value:c.isEmpty}),a.defineProperty(Array.prototype,"isFull",{enumerable:!1,writable:!1,value:c.isFull}),a.defineProperty(Array.prototype,"last",{enumerable:!1,writable:!1,value:c.last}),a.defineProperty(Array.prototype,"max",{enumerable:!1,writable:!1,value:c.max}),a.defineProperty(Array.prototype,"min",{enumerable:!1,writable:!1,value:c.min}),a.defineProperty(Array.prototype,"mutate",{enumerable:!1,writable:!1,
value:c.mutate}),a.defineProperty(Array.prototype,"orderBy",{enumerable:!1,writable:!1,value:c.orderBy}),a.defineProperty(Array.prototype,"quicksort",{enumerable:!1,writable:!1,value:c.quicksort}),a.defineProperty(Array.prototype,"quicksort3",{enumerable:!1,writable:!1,value:c.quicksort3}),a.defineProperty(Array.prototype,"removeAll",{enumerable:!1,writable:!1,value:c.removeAll}),a.defineProperty(Array.prototype,"select",{enumerable:!1,writable:!1,value:c.select}),a.defineProperty(Array.prototype,
"skip",{enumerable:!1,writable:!1,value:c.skip}),a.defineProperty(Array.prototype,"sum",{enumerable:!1,writable:!1,value:c.sum}),a.defineProperty(Array.prototype,"swap",{enumerable:!1,writable:!1,value:c.swap}),a.defineProperty(Array.prototype,"take",{enumerable:!1,writable:!1,value:c.take}),a.defineProperty(Array.prototype,"takeWhile",{enumerable:!1,writable:!1,value:c.takeWhile}),a.defineProperty(Array.prototype,"where",{enumerable:!1,writable:!1,value:c.where}),a.defineProperty(Array.prototype,
"zip",{enumerable:!1,writable:!1,value:c.zip}))}}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){a.classes=a.classes||{};var c=function(b,e){var c=arguments.callee.caller;if(a.getType(b)===a.types.function){if(!b()){if(e)throw Error(e);c=b.toString();c=c.substring(c.indexOf("{")+1,c.lastIndexOf("}")).trim();throw Error("Assertion failed: "+c);}}else if(a.getType(b)===a.types.string){if(b=a.lambda(b).bind(c),!b()){if(e)throw Error(e);c=b.toString();c=c.substring(c.indexOf("{")+1,c.lastIndexOf("}")).trim();throw Error("Assertion failed: "+c);}}else if(!b){if(e)throw Error(e);
throw Error("Assertion failed: "+String(b));}},e=function(){c(function(){return a.check.argsNotNull.apply(this,arguments)})},d=function(b){c(function(){return a.check.exists(b)})},b=function(b){c(function(){return a.check.isArray(b)})},g=function(b){c(function(){return a.check.isBoolean(b)})},f=function(b){c(function(){return a.check.isDate(b)})},k=function(b){c(function(){return a.check.isFunction(b)})},q=function(b){c(function(){return a.check.isNonEmptyArray(b)})},m=function(b){c(function(){return a.check.isNumber(b)})},
p=function(b){c(function(){return a.check.isObject(b)})},r=function(b){c(function(){return a.check.isReference(b)})},s=function(){var b=arguments;c(function(){return a.check.isSmashable.apply(l,b)})},n=function(b){c(function(){return a.check.isString(b)})},t=function(b,e){c(function(){return a.check.isType(b,e)})},u=function(b){c(function(){return a.check.isValue(b)})},v=function(){return function(){return function(c){a.defineProperty(c,"argsNotNull",{get:function(){return e},writeable:!1});a.defineProperty(c,
"exists",{get:function(){return d},writeable:!1});a.defineProperty(c,"isArray",{get:function(){return b},writeable:!1});a.defineProperty(c,"isBoolean",{get:function(){return g},writeable:!1});a.defineProperty(c,"isDate",{get:function(){return f},writeable:!1});a.defineProperty(c,"isFunction",{get:function(){return k},writeable:!1});a.defineProperty(c,"isNonEmptyArray",{get:function(){return q},writeable:!1});a.defineProperty(c,"isNumber",{get:function(){return m},writeable:!1});a.defineProperty(c,
"isObject",{get:function(){return p},writeable:!1});a.defineProperty(c,"isReference",{get:function(){return r},writeable:!1});a.defineProperty(c,"isSmashable",{get:function(){return s},writeable:!1});a.defineProperty(c,"isString",{get:function(){return n},writeable:!1});a.defineProperty(c,"isType",{get:function(){return t},writeable:!1});a.defineProperty(c,"isValue",{get:function(){return u},writeable:!1});return c}(c)}}();a.classes.Asserter=v;a.assert=new a.classes.Asserter}"undefined"!==typeof("undefined"!==
typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){a.classes=a.classes||{};var c=function(){return function(c){var d,b=function(a){return d[a].data},g=function(a){d={}};d={};return function(c){a.defineProperty(c,"peek",{get:function(){return b},writeable:!1});a.defineProperty(c,"reset",{get:function(){return g},writeable:!1});return c}(function(b,c){a.assert.exists(b);if(a.check.exists(c))return d[b]={data:c,args:null,getter:null,timestamp:(new Date).getTime()},d[b].data;var e;e=a.check.exists(d[b])?d[b].data:null;return e})}}();
a.classes.Cache=c}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){var c=function(){};c.argsNotNull=function(){for(var a=0;a<arguments.length;a++)if(null==arguments[a])return!1;return!0};c.exists=function(a){return null!=a};c.isArray=function(c){return a.getType(c)===a.types.array};c.isBoolean=function(c){return a.getType(c)===a.types.boolean};c.isDate=function(c){return a.getType(c)===a.types.date};c.isFunction=function(c){return a.getType(c)===a.types.function};c.isGeneratorFunction=function(c){return a.getType(c)===a.types.function&&
c.isGenerator()};c.isIterable=function(c){return a.check.exists(c)?a.getType(c[a.symbols.iterator]||c.prototype[a.symbols.iterator])===a.types.function:!1};c.isNonEmptyArray=function(c){return a.check.exists(c)&&a.getType(c)===a.types.array&&0<c.length};c.isNumber=function(a){return!isNaN(a)};c.isObject=function(c){return a.getType(c)===a.types.object};c.isReference=function(c){switch(a.getType(c)){case a.types.array:case a.types.date:case a.types.function:case a.types.generator:case a.types.generatorFunction:case a.types.object:case a.types.regexp:return!0;
default:return!1}};c.isSmashable=function(){var c=Array.prototype.slice.call(arguments);if(1>c.length)return!1;var d=a.getType(c[0]);if(d!==a.types.array&&d!==a.types.object&&d!==a.types.function)return!1;d===a.types.function&&(d=a.types.object);for(var b=1;b<c.length;b++){var g=a.getType(c[b]);g===a.types.function&&(g=a.types.object);if(g!==d)return!1}return!0};c.isString=function(c){return a.getType(c)===a.types.string};c.isType=function(c,d){return a.getType(c)===d};c.isValue=function(c){switch(a.getType(c)){case a.types.boolean:case a.types.null:case a.types.number:case a.types.string:case a.types.undefined:return!0;
default:return!1}};a.check=c}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){a.classes=a.classes||{};var c=function(c,g){a.assert.isString(g);switch(g){case a.types.boolean:return e(c);case a.types.date:return d(c);case a.types.number:return b(c)}},e=function(b){if(a.check.exists(b)&&a.check.isFunction(b.toBoolean))return b.toBoolean();switch(a.getType(b)){case a.types.boolean:return b;case a.types.string:switch(b.toLowerCase().trim()){case "false":case "0":case "":case null:case l:return!1;default:return!0}default:return!!b}},d=function(b){if(a.check.exists(b)&&
a.check.isFunction(b.toDate))return b.toDate();switch(a.getType(b)){case a.types.date:return b;case a.types.string:return new Date(Date.parse(b));default:return new Date(Date.parse(b.toString()))}},b=function(b){if(a.check.exists(b)&&a.check.isFunction(b.toNumber))return b.toNumber();switch(a.getType(b)){case a.types.number:return b;default:return+b}},g=function(){return function(){return function(c){a.defineProperty(c,"toBoolean",{get:function(){return e},writeable:!1});a.defineProperty(c,"toDate",
{get:function(){return d},writeable:!1});a.defineProperty(c,"toNumber",{get:function(){return b},writeable:!1});return c}(c)}}();a.classes.Converter=g;a.convert=new a.classes.Converter}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){a.classes=a.classes||{};var c=function(){return function(){var c=[],d=function(a){var b=c[a];if(null!=b)for(var d=0;d<b.length;d++){var g=b[d];null!=g.func&&g.func.apply(null,Array.prototype.slice.call(arguments,1))}},b=function(b){a.check.exists(b);c[b]=null},g=function(b,d){a.check.exists(b);a.check.isFunction(d);var g=c[b]||(c[b]=[]),h={func:d};g.push(h);return function(){c[b].removeAll(function(a){return a===h})}};return function(c){a.defineProperty(c,"call",{get:function(){return d},
writeable:!1});a.defineProperty(c,"clear",{get:function(){return b},writeable:!1});a.defineProperty(c,"on",{get:function(){return g},writeable:!1});return c}({})}}();a.classes.Events=c;a.events=new a.classes.Events}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){var c=a.functions=a.functions||{};c.curry=function(){function b(a){return a.length>=e?d.apply(null,a):function(){return b(a.concat(Array.prototype.slice.call(arguments)))}}var c=0,d=a.getType(this)===a.types.function?this:arguments[c++];a.assert.isFunction(d);var c=Array.prototype.slice.call(arguments),e=d.length;return b(c)};var d=function(){return a.deepCopy(this)},h=function(b,c){return a.defineProperty(this,b,c)},b=function(b){return a.equals(this,b)},g=function(){var b=
Array.prototype.slice.call(arguments);b.unshift(this);return a.functions.extend.apply(null,b)};c.extend=function(){return a.extend.apply(null,arguments)};c.getArgumentNames=function(){var b=0,b=a.getType(this)===a.types.function?this:arguments[b++];a.assert.isFunction(b);b=b.toString();b=b.substring(b.indexOf("(")+1,b.indexOf(")")).trim().split(",");b.map(function(a,b,c){c[b]=a.trim().replace(/(\n)?\/\*\*\//g,"")});return b};c.getBody=function(){var b=0,b=a.getType(this)===a.types.function?this:arguments[b++];
a.assert.isFunction(b);b=b.toString();return b.toString().substring(b.indexOf("{")+1,b.indexOf("}")).trim()};var f=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return a.functions.smash.apply(null,b)};c.smash=function(){return a.smash.apply(null,arguments)};a.setup.initFunctions=function(k){k&&(a.defineProperty(Function.prototype,"curry",{enumerable:!1,writable:!1,value:c.curry}),a.defineProperty(Function.prototype,"deepCopy",{enumerable:!1,writable:!1,value:d}),a.defineProperty(Function.prototype,
"defineProperty",{enumerable:!1,writable:!1,value:h}),a.defineProperty(Function.prototype,"equals",{enumerable:!1,writable:!1,value:b}),a.defineProperty(Function.prototype,"extend",{enumerable:!1,writable:!1,value:g}),a.defineProperty(Function.prototype,"getArgumentNames",{enumerable:!1,writable:!1,value:c.getArgumentNames}),a.defineProperty(Function.prototype,"getBody",{enumerable:!1,writable:!1,value:c.getBody}),a.defineProperty(Function.prototype,"smash",{enumerable:!1,writable:!1,value:f}))}}
"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){var c=/\+/g,d=function(d){a.defineProperty(d,"parameters",{get:function(){var a={};if("undefined"!==typeof window){var d=window.location.href,e=d.indexOf("?");if(-1<e)for(d=d.substring(e+1).split("&"),e=0;e<d.length;e++){var h=d[e].split("=");2==h.length&&(a[h[0]]=decodeURIComponent(h[1].replace(c," ")))}}return a},writeable:!1});a.defineProperty(d,"locale",{get:function(){return this.parameters.locale||navigator.language||navigator.userLanguage},writeable:!1});return d}({});
a.location=d}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){a.classes=a.classes||{};var c=["log"],d=function(){return function(d,b){var e,f,k,q,m,p,r=function(b){if(a.getType(b)===a.types.string)a:switch(b.toLowerCase().trim()){case "false":case "0":case "":case null:case l:b=!1;break a;default:b=!0}e=!!b},s;(s=function(d){a.assert.exists(d);for(var e=0;e<c.length;e++)a.assert.isFunction(d[c[e]]);f=d.log.bind(d);k=a.check.exists(d.debug)?d.debug.bind(d):d.log.bind(d);q=a.check.exists(d.error)?d.error.bind(d):d.log.bind(d);m=a.check.exists(d.info)?
d.info.bind(d):d.log.bind(d);p=a.check.exists(d.warn)?d.warn.bind(d):d.log.bind(d);r(null!=b?b:a.location?a.location.parameters.debug:!1)})(d);return function(b){a.defineProperty(b,"debug",{get:function(){return e?k:a.functions.empty},writeable:!1});a.defineProperty(b,"error",{get:function(){return q},writeable:!1});a.defineProperty(b,"info",{get:function(){return m},writeable:!1});a.defineProperty(b,"log",{get:function(){return f},writeable:!1});a.defineProperty(b,"warn",{get:function(){return p},
writeable:!1});a.defineProperty(b,"setDebugLogging",{get:function(){return r},writeable:!1});a.defineProperty(b,"setLogger",{get:function(){return s},writeable:!1});return b}(f)}}();a.setup.initLogger=function(c){a.check.exists(c)&&(a.log=new a.classes.LogInterface(c))};a.classes.LogInterface=d}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){var c=a.numbers={};c.factors=function(){var c=0,c=a.getType(this)===a.types.number?this:arguments[c++];a.assert.isNumber(c);for(var d=[],b=[],g=1;g<=Math.floor(Math.sqrt(c));g++)0==c%g&&(d.push(g),c/g!==g&&b.push(c/g));return d.concat(b.reverse())};c.round=function(){var c=0,d=a.getType(this)===a.types.number?this:arguments[c++],b=arguments[c++]||1,c=arguments[c++];a.assert.isNumber(d);if(c){c=c.toString().toLowerCase();if("down"===c)return a.numbers.roundDown(d,b);if("up"===
c)return a.numbers.roundUp(d,b)}return Math.round(d/b)*b};c.roundDown=function(){var c=0,d=a.getType(this)===a.types.number?this:arguments[c++],c=arguments[c++]||1;a.assert.isNumber(d);return Math.floor(d/c)*c};c.roundUp=function(){var c=0,d=a.getType(this)===a.types.number?this:arguments[c++],c=arguments[c++]||1;a.assert.isNumber(d);return Math.ceil(d/c)*c};a.setup.initNumbers=function(c){c&&(a.defineProperty(Number.prototype,"factors",{enumerable:!1,writable:!1,value:a.numbers.factors}),a.defineProperty(Number.prototype,
"round",{enumerable:!1,writable:!1,value:a.numbers.round}),a.defineProperty(Number.prototype,"roundDown",{enumerable:!1,writable:!1,value:a.numbers.roundDown}),a.defineProperty(Number.prototype,"roundUp",{enumerable:!1,writable:!1,value:a.numbers.roundUp}))}}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){var c=a.objects={},d=function(){return a.deepCopy(this)},h=function(b,c){return a.defineProperty(this,b,c)},b=function(b){return a.equals(this,b)},g=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return a.objects.extend.apply(null,b)};c.extend=function(){return a.extend.apply(null,arguments)};var f=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return a.objects.smash.apply(null,b)};c.smash=function(){return a.smash.apply(null,
arguments)};a.setup.initObjects=function(c){c&&(a.defineProperty(Object.prototype,"deepCopy",{enumerable:!1,writable:!1,value:d}),a.defineProperty(Object.prototype,"defineProperty",{enumerable:!1,writable:!1,value:h}),a.defineProperty(Object.prototype,"equals",{enumerable:!1,writable:!1,value:b}),a.defineProperty(Object.prototype,"extend",{enumerable:!1,writable:!1,value:g}),a.defineProperty(Object.prototype,"smash",{enumerable:!1,writable:!1,value:f}))}}"undefined"!==typeof("undefined"!==typeof window?
window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&(_module.exports=d))})();
(function(l){function d(a){function c(b){var c=new d,f=b||"";this.stop=function(){c.stop();a.log.debug(f+" took: "+c.duration()+" ms")};c.start()}function d(){var a=null,c=null,e=!1;this.start=function(){e||(c=null,e=!0,a=(new Date).getTime())};this.stop=function(){e&&(c=(new Date).getTime(),e=!1)};this.duration=function(){return e?(new Date).getTime()-a:c-a};this.reset=function(){e=!1;c=a=null}}a.classes=a.classes||{};var h=function(){return function(){var b=[],d=function(a){b.push(new c(a))},e=
function(){0<b.length&&b.pop().stop()};return function(b){a.defineProperty(b,"push",{get:function(){return d},writeable:!1});a.defineProperty(b,"pop",{get:function(){return e},writeable:!1});return b}({})}}();a.classes.StopwatchStack=h;a.classes.StopwatchWrapper=c;a.classes.Stopwatch=d;a.sw=new a.classes.StopwatchStack}"undefined"!==typeof("undefined"!==typeof window?window:"undefined"!==typeof window?global:this).z?d(z):"undefined"!==typeof module&&(_module=module,"undefined"!==typeof module.exports&&
(_module.exports=d))})();
